#!/usr/bin/env bash
#SBATCH --job-name=score_self_collected
#SBATCH --account=biyik_1165
#SBATCH --partition=gpu
#SBATCH --gres=gpu:1
#SBATCH --cpus-per-task=4
#SBATCH --mem=32G
#SBATCH --time=4:00:00
#SBATCH --output=/project2/biyik_1165/haobaizh/rewind_valuemodel/logs/%x_%j.out
#SBATCH --error=/project2/biyik_1165/haobaizh/rewind_valuemodel/logs/%x_%j.err

set -e

# Load environment
source /project2/biyik_1165/haobaizh/rewind_valuemodel/env_mujoco.sh

cd /project2/biyik_1165/haobaizh/rewind_valuemodel/metaworld_policy_training

# Sanity checks
which python
python -c "import torch; print('torch=', torch.__version__)"

srun python -u score_self_collected.py \
  --video_root ../self_collected_videos \
  --reward_model_path ../checkpoints/rewind_metaworld_epoch_19.pth \
  --output_dir score_output/self_collected \
  --fps 10
